<link type="text/css" rel="stylesheet" href="bootstrap/vendor/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css">
<link type="text/css" rel="stylesheet" href="bootstrap/vendor/plugins/select2/select2.min.css">
<section class="content-header">
	<h1>
		预约列表 <small>开始管理预约</small>
	</h1>
	<ol class="breadcrumb">
		<li><a href="#page/center/home"><i class="fa fa-home"></i> Home</a></li>
		<li><a href="#page/obd/reserve/reserveList"><i class="glyphicon glyphicon-list"></i> 预约列表</a></li>
		<li class="active" th:text="${reserve==null?'新建预约':'编辑预约'}">新建预约</li>
	</ol>
</section>
<!-- Main content -->
<section class="content" th:inline="text">

	<div class="row">
		<div class="col-xs-12">

			<div class="box box-primary">
				<div class="box-header with-border">
					<h3 class="box-title" th:text="${reserve==null?'新建预约':'编辑预约'}">新建预约</h3>
				</div>
				<!-- /.box-header -->
				<!-- form start -->
				<form role="form" class="reserve-form" action="/obd/reserve/save">
					<input type="hidden" name="id" th:value="${reserve==null?'':reserve.id}" />
					<div class="box-body">
						<div class="form-group">
			                <label for="createdDateInput">createdDate</label>
			                <div class="input-group date" id="createdDatepicker">
			                  <div class="input-group-addon">
			                    <i class="fa fa-calendar"></i>
			                  </div>
			                  <input type="text" class="form-control pull-right"  name="createdDate"  data-bv-notempty="true" data-bv-notempty-message="请填写createdDate" th:value="${reserve==null||reserve.createdDate==null?'': #dates.format(reserve.createdDate, 'yyyy年MM月dd日 HH:mm')}">
			                </div>
			            </div>
						<div class="form-group">
			                <label for="lastModifiedDateInput">lastModifiedDate</label>
			                <div class="input-group date" id="lastModifiedDatepicker">
			                  <div class="input-group-addon">
			                    <i class="fa fa-calendar"></i>
			                  </div>
			                  <input type="text" class="form-control pull-right"  name="lastModifiedDate"  data-bv-notempty="true" data-bv-notempty-message="请填写lastModifiedDate" th:value="${reserve==null||reserve.lastModifiedDate==null?'': #dates.format(reserve.lastModifiedDate, 'yyyy年MM月dd日 HH:mm')}">
			                </div>
			            </div>
						
					</div>
					<!-- /.box-body -->

					<div class="box-footer">
						<button type="button" class="btn btn-default" onclick="location.href='#/page/obd/reserve/reserveList'">返回列表</button>
						<button type="submit" class="btn btn-primary pull-right">保存</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>

<script type="text/javascript">
	require([ "domReady","datetimepickerzh","select2zh" ], function(domReady) {
		domReady(function() {
			activeMenu("obd_reserve_list");
			
			$('#createdDatepicker').datetimepicker({
		    	format: "yyyy年mm月dd日 hh:ii",
		    	initialDate:"[[${reserve==null||reserve.createdDate==null?'': #dates.format(reserve.createdDate, 'yyyy年MM月dd日 HH:mm')}]]",
		      	autoclose: true
		    });
			$('#lastModifiedDatepicker').datetimepicker({
		    	format: "yyyy年mm月dd日 hh:ii",
		    	initialDate:"[[${reserve==null||reserve.lastModifiedDate==null?'': #dates.format(reserve.lastModifiedDate, 'yyyy年MM月dd日 HH:mm')}]]",
		      	autoclose: true
		    });

			var $form = $(".reserve-form");		  
			$(".reserve-form").bootstrapValidator().on('success.form.bv', function(e) {
				e.preventDefault();
				var $form = $(e.target);
				var bv = $form.data('bootstrapValidator');
				console.log("");
				$.post($form.attr('action'), $form.serialize(), function(result) {
					if (result.success) {
						$.alert({
							title : false,
							closeIcon: true,
							content : "保存成功",
							confirmButton : "返回列表",
							confirm : function() {
								location.href = "#/page/obd/reserve/reserveList";
							}
						});

					} else {
						$.alert({
							title : false,
							content : result.msg,
							confirmButton : "关闭"
						});
						$form.bootstrapValidator('disableSubmitButtons', false);
					}
				}, 'json');
			});
		});
	});
</script>