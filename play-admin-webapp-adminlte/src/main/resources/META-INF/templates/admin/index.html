<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <base href="../../META-INF/" th:href="@{${adminPath}}" />
  <title>艾尔里服务平台</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="shortcut icon" href="assets/favicon.ico">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="assets/vendor/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="assets/vendor/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="assets/adminlte/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="assets/adminlte/css/skins/_all-skins.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="assets/vendor/plugins/iCheck/all.css">
  
  <!-- Date Picker -->
  <link rel="stylesheet" href="assets/vendor/plugins/datepicker/datepicker3.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="assets/vendor/plugins/daterangepicker/daterangepicker.css">
  <!-- bootstrap wysihtml5 - text editor -->
  <link rel="stylesheet" href="assets/vendor/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
  <link rel="stylesheet" href="assets/vendor/plugins/jquery-confirm/jquery-confirm.min.css">
  <link rel="stylesheet" href="assets/vendor/plugins/pace/pace.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  <header th:replace="classpath:/admin/fragments/header :: main"></header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside th:replace="classpath:/admin/fragments/main_sidebar :: main"></aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">

  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    <div class="pull-right hidden-xs">
      <b>Version</b> ${project.version}
    </div>
    <strong>Copyright &copy; 2017 <a href="http://www.airlenet.com">AirleNet</a>.</strong> All rights
    reserved.
  </footer>

  
  <aside th:replace="classpath:/admin/fragments/control_sidebar :: main"></aside>
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->
<script type="text/javascript" src="assets/vendor/plugins/pace/pace.min.js"></script>
<script type="text/javascript" src="assets/vendor/plugins/holder/holder.min.js"></script>
<script data-main="../META-INF/" th:data-main="@{/}"  src="assets/vendor/plugins/requirejs/require.js"></script>


<script type="text/javascript">
		var base = "[[${#httpServletRequest.getContextPath()}]]";
        var admin="[[${#httpServletRequest.getContextPath()}+${adminPath}]]";
		var activeMenu = function(code) {
			Pace.restart();
			$(".sidebar-menu").find(".active").removeClass("active");
			//$(".sidebar-menu").find(".menu-" + code).parent().removeClass('menu-open');
			if(code=="home"){
				$(".sidebar-menu").find(".menu-open").slideUp(false);
			}
			$(".sidebar-menu").find(".menu-" + code).addClass("active");
			$(".sidebar-menu").find(".menu-" + code).parent().parent().addClass("active");
			
		};

		requirejs.config({
			paths : {
				text : "assets/vendor/plugins/requirejs/text",
				domReady : "assets/vendor/plugins/requirejs/domReady",
				jquery : ["assets/vendor/plugins/jQuery/jquery-2.2.3.min","//cdn.bootcss.com/jquery/2.2.4/jquery.min"],
				jqueryui:["assets/vendor/plugins/jQueryUI/jquery-ui.min"],
				bootstrap : ["assets/vendor/bootstrap/js/bootstrap.min","//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min"],
				slimscroll : ["assets/vendor/plugins/slimScroll/jquery.slimscroll.min","//cdn.bootcss.com/jQuery-slimScroll/1.3.8/jquery.slimscroll.min"],
				fastclick : ["assets/vendor/plugins/fastclick/fastclick.min","//cdn.bootcss.com/fastclick/1.0.6/fastclick.min"],
				router : ["assets/vendor/plugins/director/director.min","//cdn.bootcss.com/Director/1.2.8/director.min"],
				//bootgrid : "//cdn.bootcss.com/jquery-bootgrid/1.3.1/jquery.bootgrid.min",
				bootgrid : ["assets/vendor/plugins/jquery.bootgrid/jquery.bootgrid","bootstrap/vendor/plugins/jquery.bootgrid/jquery.bootgrid"],
				bootgridfa : ["assets/vendor/plugins/jquery.bootgrid/jquery.bootgrid.fa.min","//cdn.bootcss.com/jquery-bootgrid/1.3.1/jquery.bootgrid.fa.min"],
				confirm : ["assets/vendor/plugins/jquery-confirm/jquery-confirm.min","//cdn.bootcss.com/jquery-confirm/2.5.1/jquery-confirm.min"],
				validator : "assets/vendor/plugins/bootstrapvalidator/js/bootstrapValidator.min",
				validatorzh : "assets/vendor/plugins/bootstrapvalidator/js/language/zh_CN",
				treetable:"//cdn.bootcss.com/jquery-treetable/3.2.0/jquery.treetable",
				treegrid_bootstrap3:"//cdn.bootcss.com/jquery-treegrid/0.2.0/js/jquery.treegrid.bootstrap3",
				treegrid:"//cdn.bootcss.com/jquery-treegrid/0.2.0/js/jquery.treegrid.min",
				treeview_bootstrap:"//cdn.bootcss.com/bootstrap-treeview/1.2.0/bootstrap-treeview.min",
				jstree:"//cdn.bootcss.com/jstree/3.3.2/jstree.min",
				fancytree:"assets/adminlte/vendor/fancytree/js/jquery.fancytree-all.min",
				fileinput : ["assets/vendor/plugins/bootstrap-fileinput/js/fileinput.min","//cdn.bootcss.com/bootstrap-fileinput/4.3.3/js/fileinput.min"],
				fileinputzh : ["assets/vendor/plugins/bootstrap-fileinput/js/locales/zh","//cdn.bootcss.com/bootstrap-fileinput/4.3.3/js/locales/zh.min"],

				jquery_sidebar:"assets/vendor/plugins/jquery.sidebar/jquery.sidebar.min",
				select2 : ["assets/vendor/plugins/select2/select2.full.min","//cdn.bootcss.com/select2/4.0.3/js/select2.full.min"],
				select2zh : ["assets/vendor/plugins/select2/i18n/zh-CN","//cdn.bootcss.com/select2/4.0.3/js/i18n/zh-CN"],
				//bootstrapmultiselect : "//cdn.bootcss.com/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.min",

				typeahead : "//cdn.bootcss.com/bootstrap-3-typeahead/4.0.1/bootstrap3-typeahead.min",

				datepicker : "//cdn.bootcss.com/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min",
				datepickerzh : "//cdn.bootcss.com/bootstrap-datepicker/1.6.4/locales/bootstrap-datepicker.zh-CN.min",
				

				datetimepicker : "assets/vendor/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min",
				datetimepickerzh : "bootstrap/vendor/plugins/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN",
				kindeditor:"assets/vendor/plugins/kindeditor/kindeditor-all-min",
				icheck:["assets/vendor/plugins/iCheck/icheck.min","//cdn.bootcss.com/iCheck/1.0.2/icheck"],
				adminlte : "assets/adminlte/js/adminlte.min",
				app : "assets/js/app"
			},
			shim : {
				slimscroll : [ "jquery" ],
				bootstrap : {
					deps : [ "jquery" ],
					exports : "bootstrap"
				},
				jstree:["jquery"],
				treetable:["jquery"],
				treegrid:["jquery"],
				treegrid_bootstrap3:["treegrid"],
				treeview_bootstrap:["bootstrap"],
				bootgrid : [ "jquery" ],
				bootgridfa : [ "bootgrid" ],
				validator : [ "bootstrap" ],
				validatorzh : [ "validator" ],
				confirm : [ "jquery" ],
				fileinput : [ "bootstrap" ],
				fileinputzh : [ "fileinput" ],
				select2 : [ "bootstrap" ],
				select2zh : [ "select2" ],
				datepicker : [ "bootstrap" ],
				datepickerzh : [ "datepicker" ],
				jqueryui:["jquery"],
				fancytree:["jqueryui"],
				jquery_sidebar:["jquery"],
				datetimepickerzh:["datetimepicker"],
				adminlte : [ "jquery", "bootstrap", "slimscroll", "fastclick", "bootgridfa", "confirm", "validatorzh" ],
				app:["adminlte"]
			}
		});

		requirejs([ "jquery", "router", "text", "app" ], function($) {
			$(function() {

				var contentWrapper = $(".content-wrapper");
				var routes = {
					"/page" : {
						"?((\w|.)*)" : function(path) {
							require([ "text!" + base + "/" + path + ".view?_t=" + (new Date()).getTime() ], function(html) {
								contentWrapper.html(html);
								$("body").removeClass('sidebar-open');
							},function(err){
									$.alert({
										title : false,
										content :err.xhr.status==404?"页面不存在":(err.xhr.status==401?"权限不足":err+""),
										confirmButton : "关闭"												
									});
							});
						}
					}
				};

				var router = Router(routes);

				router.init();

				var hash = window.location.hash;
				if (hash && hash != "") {

				} else {
					window.location.href = admin+"#/page/center/home";
				}

			});
		});
	</script>
</body>
</html>